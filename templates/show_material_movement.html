{% extends "base.html" %}
{% block title %}
Star ERP -- View Material Movement
{% endblock %}
{% block content %}

<h1 class="h3 mb-4 text-gray-800">Material Movement Details</h1>
<!--<div class="dropdown show">-->
<!--  <a class="btn btn-secondary dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">-->
<!--    Download-->
<!--  </a>-->

<!--  <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">-->
<!--&lt;!&ndash;    <a class="dropdown-item" href="#">Excel</a>&ndash;&gt;-->
<!--&lt;!&ndash;    <a class="dropdown-item" href="#">Pdf</a>&ndash;&gt;-->
<!--    <a class="dropdown-item" href="/download_mm_report_as_csv">CSV</a>-->
<!--  </div>-->
<!--</div>-->
<div>
<button type="button" class="btn btn-dark openBtn" data-toggle="modal" data-target="#mmreportModal">Download</button>
</div>
<br>
<!-- Logout Modal-->
  <div class="modal fade" id="mmreportModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Material Movement Report</h5>
          <button class="close" type="button" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">Ã—</span>
          </button>
        </div>
        <div class="modal-body">
            <form name="gen_mm_report" action="/download_mm_report_as_csv" onsubmit="return validateForm()" method="POST">
  <div class="form-row">
    <div class="form-group col-md-4">
      <label for="inputState">Material Name</label>

      <select id="inputState" name="items_mat_data" class="form-control">
        <option value="0" selected> -- Choose --</option>
        {% if not items_mat_data %}
        <option value="no_items">No Items to display</option>
      {% else %}
        {% for items in items_mat_data %}
        <option value="{{ items.id }}" name="{{ items.material_name }}">{{ items.material_name }}</option>
        {% endfor %}
      {% endif %}
      </select>
    </div>
      <div class="form-group col-md-8">
          <label for="inputState">Date Range</label>
          <input type="text" name="daterange" value="01/01/2019 - 01/15/2019" class="form-control"/>
      </div>
  </div>

        <div class="modal-footer">
          <button class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button>
<!--            <a href="#" class="d-none d-sm-inline-block btn btn-sm btn-primary shadow-sm"><i class="fas fa-download fa-sm text-white-50"></i> Generate Report</a>-->
            </i><button type="submit" class="btn btn-primary"><i class="fas fa-download fa-sm"></i> Generate Report</button>
<!--          <a class="btn btn-primary" href="{{url_for('logout')}}">Generate Report</a>-->
        </div>
          </form>
        </div>
      </div>
    </div>
  </div>

<div class="table-responsive">
    <table id="example" class="table table-bordered">
        <thead>
            <tr>
                <th>ID</th>
                <th>Material Name</th>
                <th>Transaction Date</th>
                <th>Opening Balance</th>
                <th>Closing Balance</th>
                <th>Transaction Type</th>
            </tr>
        </thead>

        <tbody>
        {% for items in items_data %}
            <tr>
                    <td>{{items.id}}</td>
                    <td>{{items.material_name}}</td>
                    <td>{{items.date_and_time}}</td>
                    <td>{{items.opening_balance}}</td>
                    <td>{{items.closing_balance}}</td>

                {% if items.txn_type == 'Purchase' %}
                <td  class="table-success"> Purchase </td>
                {% else %}
                <td class="table-danger"> Sale </td>
                {% endif %}
            </tr>
         {% endfor %}
        </tbody>

    </table>
</div>
{% endblock %}
